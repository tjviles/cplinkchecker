"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const aws_sdk_1 = require("aws-sdk");
// Have to use nodemailer as aws-sdk can not send attachments
const nodemailer_1 = __importDefault(require("nodemailer"));
const one_blink_api_1 = __importDefault(require("../lib/one-blink-api"));
/**
 * #### Example
 *
 * ```javascript
 * const OneBlink = require('@oneblink/sdk')
 *
 * await OneBlink.sendEmail({
 *   subject: 'Message title',
 *   html: '<p>HTML version of the message</p>',
 *   from: {
 *     address: 'noreply@example.com',
 *     name: 'No Reply',
 *   },
 *   to: ['email@example.com'],
 *   cc: ['you@example.com'],
 *   bcc: ['not-you@example.com'],
 *   attachments: [
 *     {
 *       filename: pdfFileName,
 *       content: pdfData,
 *       contentType: 'application/pdf',
 *       encoding: 'binary',
 *     },
 *   ],
 * })
 * ```
 *
 * #### Options
 *
 * This function uses the popular
 * [`nodemailer`](https://www.npmjs.com/package/nodemailer) internally to send
 * emails. Please see the documentation for [Message
 * Configuration](https://nodemailer.com/message/) for available options.
 */
async function sendEmail(options) {
    const transporter = nodemailer_1.default.createTransport({
        SES: new aws_sdk_1.SES({ region: one_blink_api_1.default.tenant.awsRegion }),
    });
    const result = await transporter.sendMail(options);
    // @ts-expect-error Provided type is bad
    return result;
}
exports.default = sendEmail;
//# sourceMappingURL=sendEmail.js.map